<head><style>canvas{position:absolute;width:960px;height:540px;image-rendering:pixelated;}</style></head><body><script>(function(){'use strict';const d={},l={},aa={};function ba(b){for(var a=arguments.length-1;0<=a;a--)if(l[arguments[a]])return!0;return!1};const p=[[[228,228,228],[233,194,194],[220,155,155],[119,54,112]],[[228,228,228],[233,194,233],[220,155,220],[62,54,120]],[[200,200,200],[150,150,150],[100,100,100],[50,50,50]],[[255,255,255],[85,255,255],[255,85,255],[0,0,0]],[[85,255,85],[255,255,85],[255,85,85],[0,0,0]]];var r=0,t=p[r];function ca(b){return"rgb("+b[0]+","+b[1]+","+b[2]+")"};var u=[],v,da=0,y=0,z=0;function A(b,a){if(0<u.length){var c=u.length-1,e=u[c],g=(e.x+b)/2,f=(e.y+a)/2;u.push({x:g,y:f,f:!0});ea({x:g,y:f},e,h=>u.splice(c+1,0,h));ea({x:g,y:f},{x:b,y:a},h=>u.push(h))}u.push({x:b,y:a,f:!0})}function ea(b,a,c){for(var e,g,f=.1;.9>f;f+=.1)e=a.x*f+b.x*(1-f),g=-(a.y-b.y)*f*(f-2)+b.y,c({x:e,y:g})};function B(b,a){var c=C[0];return[b*c[0]+a*c[1]+0*c[2]+1*c[3],b*c[4]+a*c[5]+0*c[6]+1*c[7],b*c[8]+a*c[9]+0*c[10]+1*c[11],b*c[12]+a*c[13]+0*c[14]+1*c[15]]}
class D{constructor(b){this[0]=new Float32Array(16===arguments.length?[...arguments]:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.b=[]}a(b,a,c){E[3]=b;E[7]=a;E[11]=c;b=this[0];a=fa[0];c=window._ufmat;c[0]=b[0]*a[0]+b[1]*a[4]+b[2]*a[8]+b[3]*a[12];c[1]=b[0]*a[1]+b[1]*a[5]+b[2]*a[9]+b[3]*a[13];c[2]=b[0]*a[2]+b[1]*a[6]+b[2]*a[10]+b[3]*a[14];c[3]=b[0]*a[3]+b[1]*a[7]+b[2]*a[11]+b[3]*a[15];c[4]=b[4]*a[0]+b[5]*a[4]+b[6]*a[8]+b[7]*a[12];c[5]=b[4]*a[1]+b[5]*a[5]+b[6]*a[9]+b[7]*a[13];c[6]=b[4]*a[2]+b[5]*a[6]+b[6]*
a[10]+b[7]*a[14];c[7]=b[4]*a[3]+b[5]*a[7]+b[6]*a[11]+b[7]*a[15];c[8]=b[8]*a[0]+b[9]*a[4]+b[10]*a[8]+b[11]*a[12];c[9]=b[8]*a[1]+b[9]*a[5]+b[10]*a[9]+b[11]*a[13];c[10]=b[8]*a[2]+b[9]*a[6]+b[10]*a[10]+b[11]*a[14];c[11]=b[8]*a[3]+b[9]*a[7]+b[10]*a[11]+b[11]*a[15];c[12]=b[12]*a[0]+b[13]*a[4]+b[14]*a[8]+b[15]*a[12];c[13]=b[12]*a[1]+b[13]*a[5]+b[14]*a[9]+b[15]*a[13];c[14]=b[12]*a[2]+b[13]*a[6]+b[14]*a[10]+b[15]*a[14];c[15]=b[12]*a[3]+b[13]*a[7]+b[14]*a[11]+b[15]*a[15];[window._ufmat,this[0]]=[this[0],window._ufmat];
return this}}function F(b,a){function c(q,x){return 0==e[x]?"":1==e[x]?`a[${q}]`:`a[${q}]*${e[x]}`}var e="1000010000100001".split("");a.forEach((q,x)=>e[q]="defghijkl"[x]);a="";for(var g=0;16>g;g++){var f=4*~~(g/4),h=g-f,m="",n;for(n=0;4>n;n++){var w=c(f+n,h+4*n);m+=w?m?`+${w}`:w:""}a+=`c[${g}]=${m};\n`}return new Function(..."defghijkl".slice(0,b),`var a=this[0],c=window["_ufmat"];${a}
		[window["_ufmat"],this[0]]=[this[0],window["_ufmat"]];
		return this;`)}var fa=new D;new D;new D;var E=fa[0];window._ufmat=(new D)[0];D.prototype.a=F(3,[3,7,11]);F(3,[0,5,10]);D.prototype.c=F(9,[0,1,2,4,5,6,8,9,10]);const C=new D,G=document.createElement("canvas");document.body.appendChild(G);G.width=480;G.height=270;const H=G.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!0});H.enable(H.BLEND);const I=document.createElement("canvas");document.body.appendChild(I);I.width=480;I.height=270;const J=I.getContext("2d");function K(b){H.bindTexture(H.TEXTURE_2D,b.c);H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);H.texImage2D(H.TEXTURE_2D,0,H.RGBA,H.RGBA,H.UNSIGNED_BYTE,b.a);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.NEAREST);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.NEAREST)}function ha(b,a,c,e,g,f){for(var h=a;h<a+e;h++)for(var m=c;m<c+g;m++)b.g[h][m]=f}
class ia{constructor(){this.height=this.width=1024;this.a=document.createElement("canvas");this.a.width=this.width;this.a.height=this.height;this.b=this.a.getContext("2d");this.b.fillStyle="black";this.b.fillRect(0,0,this.width,this.height);this.g=[];this.c=null;for(var b=0;b<this.width;b++){this.g[b]=[];for(var a=0;a<this.height;a++)this.g[b][a]=!1}}bind(b){H.bindTexture(H.TEXTURE_2D,this.c);H.activeTexture(H.TEXTURE0+b)}clear(b){var a=b.frames[0],c=a.x;a=a.y;var e=b.width+4;b=b.height+4;ha(this,
c,a,e,b,!1);this.b.clearRect(c,a,e,b);this.c&&K(this)}};function ja(b,a){b=H.createShader(b);H.shaderSource(b,a);H.compileShader(b);if(!H.getShaderParameter(b,H.COMPILE_STATUS))throw new TypeError(`couldn't compile shader:\n${H.getShaderInfoLog(b)}`);return b};var L=null,ka=[];
function la(b,a){var c=document.createElement("CANVAS"),e=c.getContext("2d");c.width=b.width;c.height=b.height;e.drawImage(a,0*b.width,0,b.width,b.height,0,0,b.width,b.height);a:{a=M;const m=a.width-4,n=a.height-4,w=c.width+4,q=c.height+4;for(e=4;e<m;e++)for(var g=4;g<n;g++){var f;b:{for(f=e;f<e+w;f++)for(var h=g;h<g+q;h++)if(!1!==a.g[f][h]){f=!1;break b}f=!0}if(f){ha(a,e,g,w,q,!0);a.b.drawImage(c,e,g);a.bind(0);K(a);c={f:a.a,x:e,y:g};break a}}c=null}b.a.push({f:c.f,x:c.x,y:c.y})}
function N(b,a,c,e,g){var f=C;f.b.push(new D(...f[0]));C.a(a,c,0);a=C;f=c=0;var h=1,m=Math.sqrt(c*c+f*f+h*h);0!==c&&(c/=m);0!==f&&(f/=m);0!==h&&(h/=m);m=Math.cos(e);e=Math.sin(e);var n=1-m;a.c(c*c*n+m,c*f*n-h*e,c*h*n+f*e,f*c*n+h*e,f*f*n+m,f*h*n-c*e,h*c*n-f*e,h*f*n+c*e,h*h*n+m);e=-b.b;a=-b.c;c=e;f=a+b.height;h=e+b.width;m=a;n=h;var w=f;[e,a]=B(e,a);[c,f]=B(c,f);[h,m]=B(h,m);[n,w]=B(n,w);var q=C,x=q.b.pop();q[0].set(x[0]);q=b.a.length;var k=b.a[(0%q+q)%q];if(k){q=k.x/M.width;x=k.y/M.height;var xa=(k.x+
b.width)/M.width;b=(k.y+b.height)/M.height;k=O;P[k]=e;P[k+1]=a;P[k+2]=P[k+6]=c;P[k+3]=P[k+7]=f;P[k+4]=P[k+10]=h;P[k+5]=P[k+11]=m;P[k+8]=n;P[k+9]=w;Q[k]=Q[k+2]=Q[k+6]=q;Q[k+1]=Q[k+5]=Q[k+11]=x;Q[k+3]=Q[k+7]=Q[k+9]=b;Q[k+4]=Q[k+8]=Q[k+10]=xa;f=2*k;b=f+24;e=g[0];a=g[1];c=g[2];for(g=g[3];f<b;f+=4)R[f]=e,R[f+1]=a,R[f+2]=c,R[f+3]=g;O+=12}}class ma{constructor(b,a,c){this.height=this.width=0;this.b=a;this.c=c;this.a=[];ka.push(this);b&&(this.width=b.width,this.height=b.height,la(this,b))}}
var O,S,T=0,U=0,na=null,V=null,oa=null,pa=null,M=new ia,P=new Float32Array(12E3),Q=new Float32Array(12E3),R=new Uint8Array(24E3);class W extends ma{constructor(b,a,c){super(null,a,c);this.height=this.width=0;this.b=a;this.c=c;this.a=[];ka.push(this);var e=new Image;e.onload=()=>{this.width=e.width;this.height=e.height;la(this,e)};e.src="data:image/png;base64,"+b}};const X=document.createElement("canvas");X.width=120;X.height=120;const Y=X.getContext("2d");Y.beginPath();Y.fillStyle="white";Y.arc(60,60,60,0,2*Math.PI);Y.fill();const qa=new ma(X,60,60);const ra=new W("iVBORw0KGgoAAAANSUhEUgAAACIAAAASAQMAAAAE854sAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUElEQVQI1x2MsQ2AQAwDI1GkgwWQWIPuF0OC0RiFESi/eHHYiZQrzrIjIp/QLa+5dbMVGcLE5xAuabgD7E/opdVK8EJTqAFczcOcjViLu/4HJKUfCzeOqUwAAAAASUVORK5CYII=",16,9);const sa=new W("iVBORw0KGgoAAAANSUhEUgAAAB4AAAAZAQMAAAAc+wxZAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUElEQVQI12NgYGYAAvYGGMF/AEbIP2BgqLH/8IPhX/3PPwz1////YLD///8DhPX//39kMQQhW//rAQOH/AMHBgY5oAEMPAdgBO8BFDtYGhgAfZ0tyrhpqgsAAAAASUVORK5CYII=",16,9);const ta=new W("iVBORw0KGgoAAAANSUhEUgAAABIAAAAjAQMAAACjJsgcAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAN0lEQVQI12NgOMDAAMOMDxCY+QMCs/9AYP4/CCz/D4Ht/yNw/f8GOP7//wAch/9qAJuHbA8SBgCtlisq2gL0WAAAAABJRU5ErkJggg==",9,35);const ua=new W("iVBORw0KGgoAAAANSUhEUgAAABQAAAAPAQMAAADeVn0WAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAKElEQVQI12Ng+MDAwPyHgYH/PwOD/f8DDPX/HzD8//8BjkF8kDgWDABUJR521Q6ZSQAAAABJRU5ErkJggg==",10,15);const va=new W("iVBORw0KGgoAAAANSUhEUgAAAH4AAAAcAQMAAACd0ZmaAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAMUlEQVQY02Ow/48CPjDUowr8YPjAgAJsGB6gCsgwHEAV4BkVoFwAI5AxogEjotCjEgAQclFV3qUXFgAAAABJRU5ErkJggg==",0,0);const wa=new W("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAUAQMAAACOID4VAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAF0lEQVQI12OQY2CobwCh/weIRRD1cgwAXiocq2Xlx08AAAAASUVORK5CYII=",0,0);window.addEventListener("contextmenu",b=>{b.preventDefault()},!1);window.addEventListener("keydown",b=>{l[b.key.toUpperCase()]||(d[b.key.toUpperCase()]=!0);l[b.key.toUpperCase()]=!0;b.preventDefault()},!1);window.addEventListener("keyup",b=>{l[b.key.toUpperCase()]=!1;b.preventDefault()},!1);
{var ya={vertex:"\n\t\tattribute vec2 aSpritePosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tattribute vec4 aColor;\n\n\t\tuniform mat3 uMatrix;\n\n\t\tvarying vec2 vTextureCoord;\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tgl_Position = vec4((uMatrix * vec3(aSpritePosition, 1)).xy, 0, 1);\n\t\t\tvTextureCoord = aTextureCoord;\n\t\t\tvColor = aColor;\n\t\t}\n\t",fragment:"\n\t\tprecision mediump float;\n\n\t\tuniform sampler2D uSpriteTexture;\n\n\t\tvarying vec2 vTextureCoord;\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tvec4 tex = texture2D(uSpriteTexture, vTextureCoord);\n\t\t\tif (floor(tex.r) > 0.0) {\n\t\t\t\tgl_FragColor = vColor;\n\t\t\t}\n\t\t}\n\t"};
const b=ja(H.VERTEX_SHADER,ya.vertex),a=ja(H.FRAGMENT_SHADER,ya.fragment),c=H.createProgram();H.attachShader(c,b);H.attachShader(c,a);H.linkProgram(c);if(!H.getProgramParameter(c,H.LINK_STATUS))throw new TypeError(`couldn't link shader program:\n${H.getProgramInfoLog(c)}`);L=c}H.useProgram(L);H.uniformMatrix3fv(H.getUniformLocation(L,"uMatrix"),!1,[2/480,0,0,0,-2/270,0,-1,1,1]);var za=M;za.c=H.createTexture();K(za);M.bind(0);T=H.getAttribLocation(L,"aSpritePosition");U=H.getAttribLocation(L,"aTextureCoord");
S=H.getAttribLocation(L,"aColor");na=H.getUniformLocation(L,"uSpriteTexture");V=H.createBuffer();H.bindBuffer(H.ARRAY_BUFFER,V);H.bufferData(H.ARRAY_BUFFER,P,H.DYNAMIC_DRAW);oa=H.createBuffer();H.bindBuffer(H.ARRAY_BUFFER,oa);H.bufferData(H.ARRAY_BUFFER,Q,H.DYNAMIC_DRAW);pa=H.createBuffer();H.bindBuffer(H.ARRAY_BUFFER,pa);H.bufferData(H.ARRAY_BUFFER,R,H.DYNAMIC_DRAW);var Aa=I.height;da=I.width;y=Aa;var Ba=10,Ca=0,Da;A(0,0);
for(var Z=!0;Ba--;){Ca+=10*~~(5*Math.random()+10);var Ea=Z?-10:10;Da=Math.random()*((Z?-50:50)-Ea)+Ea;A(Ca,Da);Z=!Z}A(Ca+150,0);v=u[u.length-1].x;console.log(v);var Fa=1E3/60,Ga=performance.now();Ha(Ga);
function Ha(b){requestAnimationFrame(Ha);var a=b-Ga;if(a>Fa){if(!(10<a/10)){!0===d.Q&&(r=(r+1)%p.length,t=p[r]);ba("ARROWLEFT")&&(z-=10);ba("ARROWRIGHT")&&(z+=10);z<=-v&&(z=0);for(var c in l){if(d[c]&&aa[c])aa[c]();d[c]=!1}}a=t[1];H.clearColor(...[a[0]/255,a[1]/255,a[2]/255],1);H.clear(H.COLOR_BUFFER_BIT);J.clearRect(0,0,I.width,I.height);O=0;N(qa,300,80,0,[...t[2],255]);N(ra,50,50,performance.now()/200,[...t[3],255]);N(sa,100,50,performance.now()/200,[...t[3],255]);N(ta,150,50,performance.now()/
200,[...t[3],255]);N(ua,200,50,performance.now()/200,[...t[3],255]);J.fillStyle=ca(t[2]);J.beginPath();for(var e,g=0;g<u.length;g++)a=u[g],g===u.length-1?(c=u[0],e=a.x+100):(c=u[g+1],e=c.x),J.moveTo(a.x+z,y),J.lineTo(a.x+z,y/2-a.y),J.lineTo(e+z,y/2-c.y),J.lineTo(e+z,y);J.strokeStyle=ca(t[0]);J.lineWidth=2;J.beginPath();a=0;c=u[a];J.moveTo(c.x+z,y/2-c.y);a++;for(g=0;void 0!==c;){e=c.x+z+g*v;if(e>da)break;J.lineTo(e,y/2-c.y);a++;a>=u.length&&(a=0,g++);c=u[a]}J.stroke();a=~~((50-z)/(v/10));c=a+10;e=
10;void 0!==u[a]&&void 0!==u[c]&&(e=(u[c].x-u[a].x)/10);e=~~((50-z)/e);void 0===u[e]?(console.log(a,c,e),a=-1):a=~~e;0<=a&&(J.beginPath(),J.moveTo(u[a].x+z,y/2-u[a].y),J.lineTo(u[a].x+z,270),J.lineWidth=.5,J.strokeStyle="rgb(0,0,0,100)",J.stroke());N(va,4,4,0,[...t[3],255]);for(a=0;10>a;a++)N(wa,8+12*a,8,0,[...t[6>a?0:3],255]);O&&(H.bindBuffer(H.ARRAY_BUFFER,V),H.bufferSubData(H.ARRAY_BUFFER,0,P),H.enableVertexAttribArray(T),H.vertexAttribPointer(T,2,H.FLOAT,!1,0,0),H.bindBuffer(H.ARRAY_BUFFER,oa),
H.bufferSubData(H.ARRAY_BUFFER,0,Q),H.enableVertexAttribArray(U),H.vertexAttribPointer(U,2,H.FLOAT,!1,0,0),H.bindBuffer(H.ARRAY_BUFFER,pa),H.bufferSubData(H.ARRAY_BUFFER,0,R),H.enableVertexAttribArray(S),H.vertexAttribPointer(S,4,H.UNSIGNED_BYTE,!0,0,0),H.blendFunc(H.ONE,H.ONE_MINUS_SRC_ALPHA),H.useProgram(L),H.uniform1i(na,0),H.drawArrays(H.TRIANGLES,0,O/2));Ga=b}};})()</script></body>
