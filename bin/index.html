<head><style>canvas{position:absolute;width:960px;height:540px;image-rendering:pixelated;}</style></head><body><script>(function(){'use strict';var c=[[228,228,228],[233,194,194],[220,155,155],[119,54,112]];function n(a){return"rgb("+a[0]+","+a[1]+","+a[2]+")"};var p=[],r=0,v=0,w=0;function aa(){var a=ba,b=ca;if(0<p.length){var d=p.length-1,f=p[d],h=(f.x+a)/2,e=(f.y+b)/2;p.push({x:h,y:e,f:!0});da({x:h,y:e},f,k=>p.splice(d+1,0,k));da({x:h,y:e},{x:a,y:b},k=>p.push(k))}p.push({x:a,y:b,f:!0})}function da(a,b,d){for(var f,h,e=.1;.9>e;e+=.1)f=b.x*e+a.x*(1-e),h=-(b.y-a.y)*e*(e-2)+a.y,d({x:f,y:h})}
function ea(){var a=fa;a.fillStyle=n(c[2]);a.beginPath();a.moveTo(0,v);p.forEach(b=>{-10>b.x+w||b.x+w>r||a.lineTo(b.x+w,v/2-b.y)});a.lineTo(r+w,v);a.fill();a.strokeStyle=n(c[0]);a.lineWidth=2;a.stroke();a.beginPath();a.moveTo(p[0].x,v);a.lineTo(p[0].x,270);p.forEach(b=>{a.moveTo(b.x,v/2-b.y-(b.f?10:0));a.lineTo(b.x,270)});a.lineWidth=.5;a.strokeStyle="rgb(0,0,0,100)"};function x(a,b){var d=y[0];return[a*d[0]+b*d[1]+0*d[2]+1*d[3],a*d[4]+b*d[5]+0*d[6]+1*d[7],a*d[8]+b*d[9]+0*d[10]+1*d[11],a*d[12]+b*d[13]+0*d[14]+1*d[15]]}
class z{constructor(a){this[0]=new Float32Array(16===arguments.length?[...arguments]:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.b=[]}a(a,b,d){A[3]=a;A[7]=b;A[11]=d;a=this[0];b=ha[0];d=window._ufmat;d[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];d[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];d[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];d[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];d[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12];d[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13];d[6]=a[4]*b[2]+a[5]*b[6]+a[6]*
b[10]+a[7]*b[14];d[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15];d[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12];d[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13];d[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14];d[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15];d[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12];d[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13];d[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14];d[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15];[window._ufmat,this[0]]=[this[0],window._ufmat];
return this}}function B(a,b){function d(q,u){return 0==f[u]?"":1==f[u]?`a[${q}]`:`a[${q}]*${f[u]}`}var f="1000010000100001".split("");b.forEach((q,u)=>f[q]="defghijkl"[u]);b="";for(var h=0;16>h;h++){var e=4*~~(h/4),k=h-e,l="",m;for(m=0;4>m;m++){var t=d(e+m,k+4*m);l+=t?l?`+${t}`:t:""}b+=`c[${h}]=${l};\n`}return new Function(..."defghijkl".slice(0,a),`var a=this[0],c=window["_ufmat"];${b}
		[window["_ufmat"],this[0]]=[this[0],window["_ufmat"]];
		return this;`)}var ha=new z;new z;new z;var A=ha[0];window._ufmat=(new z)[0];z.prototype.a=B(3,[3,7,11]);B(3,[0,5,10]);z.prototype.c=B(9,[0,1,2,4,5,6,8,9,10]);const y=new z,C=document.createElement("canvas");document.body.appendChild(C);C.width=480;C.height=270;const D=C.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!0});D.enable(D.BLEND);const E=document.createElement("canvas");document.body.appendChild(E);E.width=480;E.height=270;const fa=E.getContext("2d");function F(a){D.bindTexture(D.TEXTURE_2D,a.c);D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);D.texImage2D(D.TEXTURE_2D,0,D.RGBA,D.RGBA,D.UNSIGNED_BYTE,a.a);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.NEAREST);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.NEAREST)}function ia(a,b,d,f,h,e){for(var k=b;k<b+f;k++)for(var l=d;l<d+h;l++)a.g[k][l]=e}
class ja{constructor(){this.height=this.width=1024;this.a=document.createElement("canvas");this.a.width=this.width;this.a.height=this.height;this.b=this.a.getContext("2d");this.b.fillStyle="black";this.b.fillRect(0,0,this.width,this.height);this.g=[];this.c=null;for(var a=0;a<this.width;a++){this.g[a]=[];for(var b=0;b<this.height;b++)this.g[a][b]=!1}}bind(a){D.bindTexture(D.TEXTURE_2D,this.c);D.activeTexture(D.TEXTURE0+a)}clear(a){var b=a.frames[0],d=b.x;b=b.y;var f=a.width+4;a=a.height+4;ia(this,
d,b,f,a,!1);this.b.clearRect(d,b,f,a);this.c&&F(this)}};function ka(a,b){a=D.createShader(a);D.shaderSource(a,b);D.compileShader(a);if(!D.getShaderParameter(a,D.COMPILE_STATUS))throw new TypeError(`couldn't compile shader:\n${D.getShaderInfoLog(a)}`);return a};var G=null,la=[];
function H(a,b,d,f,h){var e=y;e.b.push(new z(...e[0]));y.a(b,d,0);b=y;e=d=0;var k=1,l=Math.sqrt(d*d+e*e+k*k);0!==d&&(d/=l);0!==e&&(e/=l);0!==k&&(k/=l);l=Math.cos(f);f=Math.sin(f);var m=1-l;b.c(d*d*m+l,d*e*m-k*f,d*k*m+e*f,e*d*m+k*f,e*e*m+l,e*k*m-d*f,k*d*m-e*f,k*e*m+d*f,k*k*m+l);f=-a.h;b=-a.i;d=f;e=b+a.height;k=f+a.width;l=b;m=k;var t=e;[f,b]=x(f,b);[d,e]=x(d,e);[k,l]=x(k,l);[m,t]=x(m,t);var q=y,u=q.b.pop();q[0].set(u[0]);q=a.frames.length;var g=a.frames[(0%q+q)%q];q=g.x/I.width;u=g.y/I.height;var ra=
(g.x+a.width)/I.width;a=(g.y+a.height)/I.height;g=J;K[g]=f;K[g+1]=b;K[g+2]=K[g+6]=d;K[g+3]=K[g+7]=e;K[g+4]=K[g+10]=k;K[g+5]=K[g+11]=l;K[g+8]=m;K[g+9]=t;L[g]=L[g+2]=L[g+6]=q;L[g+1]=L[g+5]=L[g+11]=u;L[g+3]=L[g+7]=L[g+9]=a;L[g+4]=L[g+8]=L[g+10]=ra;e=2*g;a=e+24;f=h[0];b=h[1];d=h[2];for(h=h[3];e<a;e+=4)M[e]=f,M[e+1]=b,M[e+2]=d,M[e+3]=h;J+=12}
class N{constructor(a,b,d){this.width=a.width;this.height=a.height;this.h=b;this.i=d;this.frames=[];b=document.createElement("CANVAS");d=b.getContext("2d");b.width=this.width;b.height=this.height;d.drawImage(a,0*this.width,0,this.width,this.height,0,0,this.width,this.height);a:{a=I;const k=a.width-4,l=a.height-4,m=b.width+4,t=b.height+4;for(d=4;d<k;d++)for(var f=4;f<l;f++){var h;b:{for(h=d;h<d+m;h++)for(var e=f;e<f+t;e++)if(!1!==a.g[h][e]){h=!1;break b}h=!0}if(h){ia(a,d,f,m,t,!0);a.b.drawImage(b,
d,f);a.bind(0);F(a);b={f:a.a,x:d,y:f};break a}}b=null}this.frames.push({f:b.f,x:b.x,y:b.y});la.push(this)}}var J,O,P=0,Q=0,ma=null,R=null,S=null,T=null,I=new ja,K=new Float32Array(12E3),L=new Float32Array(12E3),M=new Uint8Array(24E3);const U=document.createElement("canvas");U.width=120;U.height=120;const V=U.getContext("2d");V.beginPath();V.fillStyle="white";V.arc(60,60,60,0,2*Math.PI);V.fill();const na=new N(U,60,60);var W=new Image;W.onload=function(){W=new N(W,16,9);console.log("Loaded spriteRobinHorizontal!")};W.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAASAQMAAAAE854sAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUElEQVQI1x2MsQ2AQAwDI1GkgwWQWIPuF0OC0RiFESi/eHHYiZQrzrIjIp/QLa+5dbMVGcLE5xAuabgD7E/opdVK8EJTqAFczcOcjViLu/4HJKUfCzeOqUwAAAAASUVORK5CYII=";var X=new Image;X.onload=function(){X=new N(X,16,9);console.log("Loaded spriteRobinVertical!")};X.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAZAQMAAAAc+wxZAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUElEQVQI12NgYGYAAvYGGMF/AEbIP2BgqLH/8IPhX/3PPwz1////YLD///8DhPX//39kMQQhW//rAQOH/AMHBgY5oAEMPAdgBO8BFDtYGhgAfZ0tyrhpqgsAAAAASUVORK5CYII=";{var oa={vertex:"\n\t\tattribute vec2 aSpritePosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tattribute vec4 aColor;\n\n\t\tuniform mat3 uMatrix;\n\n\t\tvarying vec2 vTextureCoord;\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tgl_Position = vec4((uMatrix * vec3(aSpritePosition, 1)).xy, 0, 1);\n\t\t\tvTextureCoord = aTextureCoord;\n\t\t\tvColor = aColor;\n\t\t}\n\t",fragment:"\n\t\tprecision mediump float;\n\n\t\tuniform sampler2D uSpriteTexture;\n\n\t\tvarying vec2 vTextureCoord;\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tvec4 tex = texture2D(uSpriteTexture, vTextureCoord);\n\t\t\tif (floor(tex.r) > 0.0) {\n\t\t\t\tgl_FragColor = vColor;\n\t\t\t}\n\t\t}\n\t"};
const a=ka(D.VERTEX_SHADER,oa.vertex),b=ka(D.FRAGMENT_SHADER,oa.fragment),d=D.createProgram();D.attachShader(d,a);D.attachShader(d,b);D.linkProgram(d);if(!D.getProgramParameter(d,D.LINK_STATUS))throw new TypeError(`couldn't link shader program:\n${D.getProgramInfoLog(d)}`);G=d}D.useProgram(G);D.uniformMatrix3fv(D.getUniformLocation(G,"uMatrix"),!1,[2/480,0,0,0,-2/270,0,-1,1,1]);var pa=I;pa.c=D.createTexture();F(pa);I.bind(0);P=D.getAttribLocation(G,"aSpritePosition");Q=D.getAttribLocation(G,"aTextureCoord");
O=D.getAttribLocation(G,"aColor");ma=D.getUniformLocation(G,"uSpriteTexture");R=D.createBuffer();D.bindBuffer(D.ARRAY_BUFFER,R);D.bufferData(D.ARRAY_BUFFER,K,D.DYNAMIC_DRAW);S=D.createBuffer();D.bindBuffer(D.ARRAY_BUFFER,S);D.bufferData(D.ARRAY_BUFFER,L,D.DYNAMIC_DRAW);T=D.createBuffer();D.bindBuffer(D.ARRAY_BUFFER,T);D.bufferData(D.ARRAY_BUFFER,M,D.DYNAMIC_DRAW);var qa=E.height;r=E.width;v=qa;
for(var sa=5,ba=-150,ca,Y=!0;sa--;){ba+=50*Math.random()+100;var ta=Y?-10:10;ca=Math.random()*((Y?-50:50)-ta)+ta;aa();Y=!Y}var ua=1E3/60,Z=performance.now();va(Z);
function va(a){requestAnimationFrame(va);var b=a-Z;b>ua&&(b/=10,10<b||(w-=b,w<=-10*p.length&&(w=0)),b=c[1],D.clearColor(...[b[0]/255,b[1]/255,b[2]/255],1),D.clear(D.COLOR_BUFFER_BIT),fa.clearRect(0,0,E.width,E.height),J=0,H(na,300,80,0,[...c[2],255]),H(W,50,50,performance.now()/200,[...c[3],255]),H(X,100,50,performance.now()/200,[...c[3],255]),ea(),J&&(D.bindBuffer(D.ARRAY_BUFFER,R),D.bufferSubData(D.ARRAY_BUFFER,0,K),D.enableVertexAttribArray(P),D.vertexAttribPointer(P,2,D.FLOAT,!1,0,0),D.bindBuffer(D.ARRAY_BUFFER,
S),D.bufferSubData(D.ARRAY_BUFFER,0,L),D.enableVertexAttribArray(Q),D.vertexAttribPointer(Q,2,D.FLOAT,!1,0,0),D.bindBuffer(D.ARRAY_BUFFER,T),D.bufferSubData(D.ARRAY_BUFFER,0,M),D.enableVertexAttribArray(O),D.vertexAttribPointer(O,4,D.UNSIGNED_BYTE,!0,0,0),D.blendFunc(D.ONE,D.ONE_MINUS_SRC_ALPHA),D.useProgram(G),D.uniform1i(ma,0),D.drawArrays(D.TRIANGLES,0,J/2)),Z=a)};})()</script></body>
