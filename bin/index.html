<head><style>canvas{position:absolute;width:960px;height:540px;image-rendering:pixelated;}</style></head><body><script>(function(){'use strict';const d={},h={},aa={};function ba(a){for(var b=arguments.length-1;0<=b;b--)if(h[arguments[b]])return!0;return!1};const p=[[[228,228,228],[233,194,194],[220,155,155],[119,54,112]],[[228,228,228],[233,194,233],[220,155,220],[62,54,120]],[[200,200,200],[150,150,150],[100,100,100],[50,50,50]],[[255,255,255],[85,255,255],[255,85,255],[0,0,0]],[[85,255,85],[255,255,85],[255,85,85],[0,0,0]]];var r=0,t=p[r];function ca(a){return"rgb("+a[0]+","+a[1]+","+a[2]+")"};var u=[],v,y,da=0,z=0,A=0;function B(a,b){if(0<u.length){var c=u.length-1,e=u[c],g=(e.x+a)/2,f=(e.y+b)/2;u.push({x:g,y:f,f:!0});ea({x:g,y:f},e,k=>u.splice(c+1,0,k));ea({x:g,y:f},{x:a,y:b},k=>u.push(k))}u.push({x:a,y:b,f:!0})}function ea(a,b,c){for(var e,g,f=.1;.9>f;f+=.1)e=b.x*f+a.x*(1-f),g=-(b.y-a.y)*f*(f-2)+a.y,c({x:e,y:g})}
function fa(){var a=ha;a.fillStyle=ca(t[2]);a.beginPath();for(var b,c,e,g=0;g<u.length;g++)b=u[g],g===u.length-1?(c=u[0],e=b.x+100):(c=u[g+1],e=c.x),a.moveTo(b.x+A,z),a.lineTo(b.x+A,z/2-b.y),a.lineTo(e+A,z/2-c.y),a.lineTo(e+A,z);a.strokeStyle=ca(t[0]);a.lineWidth=2;a.beginPath();b=C(0);c=u[b];a.moveTo(c.x+A,z/2-c.y);b++;for(g=0;void 0!==c;){e=c.x+A+g*v;if(e>da)break;a.lineTo(e,z/2-c.y);b++;b>=u.length&&(b=0,g++);c=u[b]}a.stroke();a.beginPath();a.moveTo(u[0].x+A,z);a.lineTo(u[0].x+A,270);u.forEach(f=>
{a.moveTo(f.x+A,z/2-f.y-(f.f?10:0));a.lineTo(f.x+A,270)});a.lineWidth=.5;a.strokeStyle="rgb(0,0,0,100)";a.stroke();b=C(150);0<=b&&(a.beginPath(),a.moveTo(u[b].x+A,z/2-u[b].y),a.lineTo(u[b].x+A,270),a.lineWidth=.5,a.strokeStyle="rgb(255,0,0,100)",a.stroke())}function C(a){a-=A;for(var b=10*~~(a/(v/y));void 0!==u[b]&&u[b].x>a;)b--;for(;void 0!==u[b]&&u[b].x<a;)b++;return void 0===u[b]?-1:b};function D(a,b){var c=E[0];return[a*c[0]+b*c[1]+0*c[2]+1*c[3],a*c[4]+b*c[5]+0*c[6]+1*c[7],a*c[8]+b*c[9]+0*c[10]+1*c[11],a*c[12]+b*c[13]+0*c[14]+1*c[15]]}
class F{constructor(a){this[0]=new Float32Array(16===arguments.length?[...arguments]:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.b=[]}a(a,b,c){G[3]=a;G[7]=b;G[11]=c;a=this[0];b=ia[0];c=window._ufmat;c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12];c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13];c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14];c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15];c[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12];c[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13];c[6]=a[4]*b[2]+a[5]*b[6]+a[6]*
b[10]+a[7]*b[14];c[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15];c[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12];c[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13];c[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14];c[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15];c[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12];c[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13];c[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14];c[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15];[window._ufmat,this[0]]=[this[0],window._ufmat];
return this}}function H(a,b){function c(q,x){return 0==e[x]?"":1==e[x]?`a[${q}]`:`a[${q}]*${e[x]}`}var e="1000010000100001".split("");b.forEach((q,x)=>e[q]="defghijkl"[x]);b="";for(var g=0;16>g;g++){var f=4*~~(g/4),k=g-f,m="",n;for(n=0;4>n;n++){var w=c(f+n,k+4*n);m+=w?m?`+${w}`:w:""}b+=`c[${g}]=${m};\n`}return new Function(..."defghijkl".slice(0,a),`var a=this[0],c=window["_ufmat"];${b}
		[window["_ufmat"],this[0]]=[this[0],window["_ufmat"]];
		return this;`)}var ia=new F;new F;new F;var G=ia[0];window._ufmat=(new F)[0];F.prototype.a=H(3,[3,7,11]);H(3,[0,5,10]);F.prototype.c=H(9,[0,1,2,4,5,6,8,9,10]);const E=new F,I=document.createElement("canvas");document.body.appendChild(I);I.width=480;I.height=270;const J=I.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!0});J.enable(J.BLEND);const K=document.createElement("canvas");document.body.appendChild(K);K.width=480;K.height=270;const ha=K.getContext("2d");function ja(a,b){a=J.createShader(a);J.shaderSource(a,b);J.compileShader(a);if(!J.getShaderParameter(a,J.COMPILE_STATUS))throw new TypeError(`couldn't compile shader:\n${J.getShaderInfoLog(a)}`);return a};function L(a){J.bindTexture(J.TEXTURE_2D,a.c);J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);J.texImage2D(J.TEXTURE_2D,0,J.RGBA,J.RGBA,J.UNSIGNED_BYTE,a.a);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.NEAREST);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.NEAREST)}function ka(a,b,c,e,g,f){for(var k=b;k<b+e;k++)for(var m=c;m<c+g;m++)a.g[k][m]=f}
class la{constructor(){this.height=this.width=1024;this.a=document.createElement("canvas");this.a.width=this.width;this.a.height=this.height;this.b=this.a.getContext("2d");this.b.fillStyle="black";this.b.fillRect(0,0,this.width,this.height);this.g=[];this.c=null;for(var a=0;a<this.width;a++){this.g[a]=[];for(var b=0;b<this.height;b++)this.g[a][b]=!1}}bind(a){J.bindTexture(J.TEXTURE_2D,this.c);J.activeTexture(J.TEXTURE0+a)}clear(a){var b=a.frames[0],c=b.x;b=b.y;var e=a.width+4;a=a.height+4;ka(this,
c,b,e,a,!1);this.b.clearRect(c,b,e,a);this.c&&L(this)}};var M=null,ma=[];
function na(a,b){var c=document.createElement("CANVAS"),e=c.getContext("2d");c.width=a.width;c.height=a.height;e.drawImage(b,0*a.width,0,a.width,a.height,0,0,a.width,a.height);a:{b=N;const m=b.width-4,n=b.height-4,w=c.width+4,q=c.height+4;for(e=4;e<m;e++)for(var g=4;g<n;g++){var f;b:{for(f=e;f<e+w;f++)for(var k=g;k<g+q;k++)if(!1!==b.g[f][k]){f=!1;break b}f=!0}if(f){ka(b,e,g,w,q,!0);b.b.drawImage(c,e,g);b.bind(0);L(b);c={f:b.a,x:e,y:g};break a}}c=null}a.a.push({f:c.f,x:c.x,y:c.y})}
function O(a,b,c,e,g){var f=E;f.b.push(new F(...f[0]));E.a(b,c,0);b=E;f=c=0;var k=1,m=Math.sqrt(c*c+f*f+k*k);0!==c&&(c/=m);0!==f&&(f/=m);0!==k&&(k/=m);m=Math.cos(e);e=Math.sin(e);var n=1-m;b.c(c*c*n+m,c*f*n-k*e,c*k*n+f*e,f*c*n+k*e,f*f*n+m,f*k*n-c*e,k*c*n-f*e,k*f*n+c*e,k*k*n+m);e=-a.b;b=-a.c;c=e;f=b+a.height;k=e+a.width;m=b;n=k;var w=f;[e,b]=D(e,b);[c,f]=D(c,f);[k,m]=D(k,m);[n,w]=D(n,w);var q=E,x=q.b.pop();q[0].set(x[0]);q=a.a.length;var l=a.a[(0%q+q)%q];if(l){q=l.x/N.width;x=l.y/N.height;var Da=(l.x+
a.width)/N.width;a=(l.y+a.height)/N.height;l=P;Q[l]=e;Q[l+1]=b;Q[l+2]=Q[l+6]=c;Q[l+3]=Q[l+7]=f;Q[l+4]=Q[l+10]=k;Q[l+5]=Q[l+11]=m;Q[l+8]=n;Q[l+9]=w;R[l]=R[l+2]=R[l+6]=q;R[l+1]=R[l+5]=R[l+11]=x;R[l+3]=R[l+7]=R[l+9]=a;R[l+4]=R[l+8]=R[l+10]=Da;f=2*l;a=f+24;e=g[0];b=g[1];c=g[2];for(g=g[3];f<a;f+=4)S[f]=e,S[f+1]=b,S[f+2]=c,S[f+3]=g;P+=12}}class oa{constructor(a,b,c){this.height=this.width=0;this.b=b;this.c=c;this.a=[];ma.push(this);a&&(this.width=a.width,this.height=a.height,na(this,a))}}
var P,T,U=0,V=0,pa=null,qa=null,ra=null,sa=null,N=new la,Q=new Float32Array(12E3),R=new Float32Array(12E3),S=new Uint8Array(24E3);class W extends oa{constructor(a,b,c){super(null,b,c);this.height=this.width=0;this.b=b;this.c=c;this.a=[];ma.push(this);var e=new Image;e.onload=()=>{this.width=e.width;this.height=e.height;na(this,e)};e.src="data:image/png;base64,"+a}};const ta=new W("iVBORw0KGgoAAAANSUhEUgAAACIAAAASAQMAAAAE854sAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUElEQVQI1x2MsQ2AQAwDI1GkgwWQWIPuF0OC0RiFESi/eHHYiZQrzrIjIp/QLa+5dbMVGcLE5xAuabgD7E/opdVK8EJTqAFczcOcjViLu/4HJKUfCzeOqUwAAAAASUVORK5CYII=",16,9);var ua=0,va=0;const X=document.createElement("canvas");X.width=120;X.height=120;const Y=X.getContext("2d");Y.beginPath();Y.fillStyle="white";Y.arc(60,60,60,0,2*Math.PI);Y.fill();const wa=new oa(X,60,60);const xa=new W("iVBORw0KGgoAAAANSUhEUgAAAB4AAAAZAQMAAAAc+wxZAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUElEQVQI12NgYGYAAvYGGMF/AEbIP2BgqLH/8IPhX/3PPwz1////YLD///8DhPX//39kMQQhW//rAQOH/AMHBgY5oAEMPAdgBO8BFDtYGhgAfZ0tyrhpqgsAAAAASUVORK5CYII=",16,9);const ya=new W("iVBORw0KGgoAAAANSUhEUgAAABIAAAAjAQMAAACjJsgcAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAN0lEQVQI12NgOMDAAMOMDxCY+QMCs/9AYP4/CCz/D4Ht/yNw/f8GOP7//wAch/9qAJuHbA8SBgCtlisq2gL0WAAAAABJRU5ErkJggg==",9,35);const za=new W("iVBORw0KGgoAAAANSUhEUgAAABQAAAAPAQMAAADeVn0WAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAKElEQVQI12Ng+MDAwPyHgYH/PwOD/f8DDPX/HzD8//8BjkF8kDgWDABUJR521Q6ZSQAAAABJRU5ErkJggg==",10,15);const Aa=new W("iVBORw0KGgoAAAANSUhEUgAAAH4AAAAcAQMAAACd0ZmaAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAMUlEQVQY02Ow/48CPjDUowr8YPjAgAJsGB6gCsgwHEAV4BkVoFwAI5AxogEjotCjEgAQclFV3qUXFgAAAABJRU5ErkJggg==",0,0);const Ba=new W("iVBORw0KGgoAAAANSUhEUgAAAAoAAAAUAQMAAACOID4VAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAF0lEQVQI12OQY2CobwCh/weIRRD1cgwAXiocq2Xlx08AAAAASUVORK5CYII=",0,0);window.addEventListener("contextmenu",a=>{a.preventDefault()},!1);window.addEventListener("keydown",a=>{h[a.key.toUpperCase()]||(d[a.key.toUpperCase()]=!0);h[a.key.toUpperCase()]=!0;a.preventDefault()},!1);window.addEventListener("keyup",a=>{h[a.key.toUpperCase()]=!1;a.preventDefault()},!1);
{var Ca={vertex:"\n\t\tattribute vec2 aSpritePosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tattribute vec4 aColor;\n\n\t\tuniform mat3 uMatrix;\n\n\t\tvarying vec2 vTextureCoord;\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tgl_Position = vec4((uMatrix * vec3(aSpritePosition, 1)).xy, 0, 1);\n\t\t\tvTextureCoord = aTextureCoord;\n\t\t\tvColor = aColor;\n\t\t}\n\t",fragment:"\n\t\tprecision mediump float;\n\n\t\tuniform sampler2D uSpriteTexture;\n\n\t\tvarying vec2 vTextureCoord;\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tvec4 tex = texture2D(uSpriteTexture, vTextureCoord);\n\t\t\tif (floor(tex.r) > 0.0) {\n\t\t\t\tgl_FragColor = vColor;\n\t\t\t}\n\t\t}\n\t"};
const a=ja(J.VERTEX_SHADER,Ca.vertex),b=ja(J.FRAGMENT_SHADER,Ca.fragment),c=J.createProgram();J.attachShader(c,a);J.attachShader(c,b);J.linkProgram(c);if(!J.getProgramParameter(c,J.LINK_STATUS))throw new TypeError(`couldn't link shader program:\n${J.getProgramInfoLog(c)}`);M=c}J.useProgram(M);J.uniformMatrix3fv(J.getUniformLocation(M,"uMatrix"),!1,[2/480,0,0,0,-2/270,0,-1,1,1]);var Ea=N;Ea.c=J.createTexture();L(Ea);N.bind(0);U=J.getAttribLocation(M,"aSpritePosition");V=J.getAttribLocation(M,"aTextureCoord");
T=J.getAttribLocation(M,"aColor");pa=J.getUniformLocation(M,"uSpriteTexture");qa=J.createBuffer();J.bindBuffer(J.ARRAY_BUFFER,qa);J.bufferData(J.ARRAY_BUFFER,Q,J.DYNAMIC_DRAW);ra=J.createBuffer();J.bindBuffer(J.ARRAY_BUFFER,ra);J.bufferData(J.ARRAY_BUFFER,R,J.DYNAMIC_DRAW);sa=J.createBuffer();J.bindBuffer(J.ARRAY_BUFFER,sa);J.bufferData(J.ARRAY_BUFFER,S,J.DYNAMIC_DRAW);var Fa=K.height,Ga=t;ua=K.width;var Ha=va=Fa;da=ua;z=Ha;var Ia=20,Ja=0,Ka;B(0,0);
for(var Z=!0;Ia--;){Ja+=10*~~(5*Math.random()+20);var La=Z?-30:30;Ka=Math.random()*((Z?-60:60)-La)+La;B(Ja,Ka);Z=!Z}B(Ja+250,0);v=u[u.length-1].x;y=~~(u.length/10);console.log(y);var Ma=1E3/60,Na=performance.now();Oa(Na);
function Oa(a){requestAnimationFrame(Oa);var b=a-Na;if(b>Ma){if(!(10<b/10)){!0===d.Q&&(r=(r+1)%p.length,t=p[r]);ba("ARROWLEFT")&&(A-=5);ba("ARROWRIGHT")&&(A+=5);A<=-v&&(A=0);for(var c in h){if(d[c]&&aa[c])aa[c]();d[c]=!1}}b=t[1];J.clearColor(...[b[0]/255,b[1]/255,b[2]/255],1);J.clear(J.COLOR_BUFFER_BIT);ha.clearRect(0,0,K.width,K.height);P=0;O(wa,300,80,0,[...t[2],255]);O(ta,50,50,performance.now()/200,[...t[3],255]);O(xa,100,50,performance.now()/200,[...t[3],255]);O(ya,150,50,performance.now()/200,
[...t[3],255]);O(za,200,50,performance.now()/200,[...t[3],255]);b=C(150);c=u[b];var e=u[b+1];O(ta,150,va/2-u[b].y-10,3.14-(void 0===c||void 0===e?0:Math.atan2(c.y-e.y,c.x-e.x)),[...Ga[3],255]);fa();O(Aa,4,4,0,[...t[3],255]);for(b=0;10>b;b++)O(Ba,8+12*b,8,0,[...t[6>b?0:3],255]);P&&(J.bindBuffer(J.ARRAY_BUFFER,qa),J.bufferSubData(J.ARRAY_BUFFER,0,Q),J.enableVertexAttribArray(U),J.vertexAttribPointer(U,2,J.FLOAT,!1,0,0),J.bindBuffer(J.ARRAY_BUFFER,ra),J.bufferSubData(J.ARRAY_BUFFER,0,R),J.enableVertexAttribArray(V),
J.vertexAttribPointer(V,2,J.FLOAT,!1,0,0),J.bindBuffer(J.ARRAY_BUFFER,sa),J.bufferSubData(J.ARRAY_BUFFER,0,S),J.enableVertexAttribArray(T),J.vertexAttribPointer(T,4,J.UNSIGNED_BYTE,!0,0,0),J.blendFunc(J.ONE,J.ONE_MINUS_SRC_ALPHA),J.useProgram(M),J.uniform1i(pa,0),J.drawArrays(J.TRIANGLES,0,P/2));Na=a}};})()</script></body>
