<head><style>canvas{position:absolute;width:960px;height:540px;image-rendering:pixelated;}</style></head><body><script>(function(){'use strict';var a=[[228,228,228],[233,194,194],[220,155,155],[119,54,112]];function l(b){return"rgb("+b[0]+","+b[1]+","+b[2]+")"};var m=[],p,u,v=0;function aa(){var b=w,c=x;if(0<m.length){var d=m.length-1,f=m[d],g=(f.x+b)/2,h=(f.y+c)/2;m.push({x:g,y:h,c:!0});y({x:g,y:h},f,k=>m.splice(d+1,0,k));y({x:g,y:h},{x:b,y:c},k=>m.push(k))}m.push({x:b,y:c,c:!0})}function y(b,c,d){for(var f,g,h=.1;.9>h;h+=.1)f=c.x*h+b.x*(1-h),g=-(c.y-b.y)*h*(h-2)+b.y,d({x:f,y:g})}
function ba(){var b=z;b.fillStyle=l(a[2]);b.beginPath();b.moveTo(0,u);m.forEach(c=>{-10>c.x+v||c.x+v>p||b.lineTo(c.x+v,u/2-c.y)});b.lineTo(p+v,u);b.fill();b.strokeStyle=l(a[0]);b.lineWidth=2;b.stroke();b.beginPath();b.moveTo(m[0].x,u);b.lineTo(m[0].x,270);m.forEach(c=>{b.moveTo(c.x,u/2-c.y-(c.c?10:0));b.lineTo(c.x,270)});b.lineWidth=.5;b.strokeStyle="rgb(0,0,0,100)"};function A(b,c){var d=ca[0];return[b*d[0]+c*d[1]+0*d[2]+1*d[3],b*d[4]+c*d[5]+0*d[6]+1*d[7],b*d[8]+c*d[9]+0*d[10]+1*d[11],b*d[12]+c*d[13]+0*d[14]+1*d[15]]}class B{constructor(b){this[0]=new Float32Array(16===arguments.length?[...arguments]:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}
function C(b,c){function d(r,e){return 0==f[e]?"":1==f[e]?`a[${r}]`:`a[${r}]*${f[e]}`}var f="1000010000100001".split("");c.forEach((r,e)=>f[r]="defghijkl"[e]);c="";for(var g=0;16>g;g++){var h=4*~~(g/4),k=g-h,n="",q;for(q=0;4>q;q++){var t=d(h+q,k+4*q);n+=t?n?`+${t}`:t:""}c+=`c[${g}]=${n};\n`}new Function(..."defghijkl".slice(0,b),`var a=this[0],c=window["_ufmat"];${c}
		[window["_ufmat"],this[0]]=[this[0],window["_ufmat"]];
		return this;`)}new B;new B;new B;window._ufmat=(new B)[0];C(3,[3,7,11]);C(3,[0,5,10]);C(9,[0,1,2,4,5,6,8,9,10]);const ca=new B,D=document.createElement("canvas");document.body.appendChild(D);D.width=480;D.height=270;const E=D.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!0});E.enable(E.BLEND);const F=document.createElement("canvas");document.body.appendChild(F);F.width=480;F.height=270;const z=F.getContext("2d");function G(b){E.bindTexture(E.TEXTURE_2D,b.b);E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,b.a);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST)}function H(b,c,d,f,g,h){for(var k=c;k<c+f;k++)for(var n=d;n<d+g;n++)b.f[k][n]=h}
class da{constructor(){this.height=this.width=1024;this.a=document.createElement("canvas");this.a.width=this.width;this.a.height=this.height;this.g=this.a.getContext("2d");this.f=[];this.b=null;for(var b=0;b<this.width;b++){this.f[b]=[];for(var c=0;c<this.height;c++)this.f[b][c]=!1}}bind(b){E.bindTexture(E.TEXTURE_2D,this.b);E.activeTexture(E.TEXTURE0+b)}clear(b){var c=b.frames[0],d=c.x;c=c.y;var f=b.width+4;b=b.height+4;H(this,d,c,f,b,!1);this.g.clearRect(d,c,f,b);this.b&&G(this)}};function I(b,c){b=E.createShader(b);E.shaderSource(b,c);E.compileShader(b);if(!E.getShaderParameter(b,E.COMPILE_STATUS))throw new TypeError(`couldn't compile shader:\n${E.getShaderInfoLog(b)}`);return b};var J=null,ea=[];
function fa(b,c=[255,255,255,255]){var d=300-b.a,f=80-b.b,g=d,h=f+1*b.height,k=d+1*b.width,n=f,q=k,t=h;[d,f]=A(d,f);[g,h]=A(g,h);[k,n]=A(k,n);[q,t]=A(q,t);var r=b.frames.length,e=b.frames[(0%r+r)%r];r=e.x/K.width;var la=e.y/K.height,ma=(e.x+b.width)/K.width;b=(e.y+b.height)/K.height;e=L;M[e]=d;M[e+1]=f;M[e+2]=M[e+6]=g;M[e+3]=M[e+7]=h;M[e+4]=M[e+10]=k;M[e+5]=M[e+11]=n;M[e+8]=q;M[e+9]=t;N[e]=N[e+2]=N[e+6]=r;N[e+1]=N[e+5]=N[e+11]=la;N[e+3]=N[e+7]=N[e+9]=b;N[e+4]=N[e+8]=N[e+10]=ma;k=2*e;d=k+24;f=c[0];
g=c[1];h=c[2];for(c=c[3];k<d;k+=4)O[k]=f,O[k+1]=g,O[k+2]=h,O[k+3]=c;L+=12}
class ha{constructor(b,c,d){this.width=b.width;this.height=b.height;this.a=c;this.b=d;this.frames=[];c=document.createElement("CANVAS");d=c.getContext("2d");c.width=this.width;c.height=this.height;d.drawImage(b,0*this.width,0,this.width,this.height,0,0,this.width,this.height);a:{b=K;const k=b.width-4,n=b.height-4,q=c.width+4,t=c.height+4;for(d=4;d<k;d++)for(var f=4;f<n;f++){var g;b:{for(g=d;g<d+q;g++)for(var h=f;h<f+t;h++)if(!1!==b.f[g][h]){g=!1;break b}g=!0}if(g){H(b,d,f,q,t,!0);b.g.drawImage(c,
d,f);c={c:b.a,x:d,y:f};break a}}c=null}this.frames.push({c:c.c,x:c.x,y:c.y});ea.push(this)}}var L,P,Q=0,R=0,S=null,T=null,U=null,V=null,K=new da,M=new Float32Array(12E3),N=new Float32Array(12E3),O=new Uint8Array(24E3);const W=document.createElement("canvas");W.width=120;W.height=120;const X=W.getContext("2d");X.beginPath();X.fillStyle="white";X.arc(60,60,60,0,2*Math.PI);X.fill();const ia=new ha(W,60,60);{var ja={i:"\n\t\tattribute vec2 aSpritePosition;\n\t\tattribute vec2 aTextureCoord;\n\t\tattribute vec4 aColor;\n\n\t\tuniform mat3 uMatrix;\n\n\t\tvarying vec2 vTextureCoord;\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tgl_Position = vec4((uMatrix * vec3(aSpritePosition, 1)).xy, 0, 1);\n\t\t\tvTextureCoord = aTextureCoord;\n\t\t\tvColor = aColor;\n\t\t}\n\t",h:"\n\t\tprecision mediump float;\n\n\t\tuniform sampler2D uSpriteTexture;\n\n\t\tvarying vec2 vTextureCoord;\n\t\tvarying vec4 vColor;\n\n\t\tvoid main() {\n\t\t\tvec4 tex = texture2D(uSpriteTexture, vTextureCoord);\n\t\t\tif (floor(tex.a) > 0.0) {\n\t\t\t\tgl_FragColor = vColor;\n\t\t\t}\n\t\t}\n\t"};
const b=I(E.VERTEX_SHADER,ja.i),c=I(E.FRAGMENT_SHADER,ja.h),d=E.createProgram();E.attachShader(d,b);E.attachShader(d,c);E.linkProgram(d);if(!E.getProgramParameter(d,E.LINK_STATUS))throw new TypeError(`couldn't link shader program:\n${E.getProgramInfoLog(d)}`);J=d}E.useProgram(J);E.uniformMatrix3fv(E.getUniformLocation(J,"uMatrix"),!1,[2/480,0,0,0,-2/270,0,-1,1,1]);var ka=K;ka.b=E.createTexture();G(ka);K.bind(0);Q=E.getAttribLocation(J,"aSpritePosition");R=E.getAttribLocation(J,"aTextureCoord");
P=E.getAttribLocation(J,"aColor");S=E.getUniformLocation(J,"uSpriteTexture");T=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,T);E.bufferData(E.ARRAY_BUFFER,M,E.DYNAMIC_DRAW);U=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,U);E.bufferData(E.ARRAY_BUFFER,N,E.DYNAMIC_DRAW);V=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,V);E.bufferData(E.ARRAY_BUFFER,O,E.DYNAMIC_DRAW);var na=F.height;p=F.width;u=na;
for(var oa=5,w=-150,x,Y=!0;oa--;){w+=50*Math.random()+100;var pa=Y?-10:10;x=Math.random()*((Y?-50:50)-pa)+pa;aa();Y=!Y}var qa=1E3/60,Z=performance.now();ra(Z);
function ra(b){requestAnimationFrame(ra);var c=b-Z;c>qa&&(c/=10,10<c||(v-=c,v<=-10*m.length&&(v=0)),c=a[1],E.clearColor(...[c[0]/255,c[1]/255,c[2]/255],1),E.clear(E.COLOR_BUFFER_BIT),z.clearRect(0,0,F.width,F.height),L=0,fa(ia,[...a[2],255]),ba(),L&&(E.bindBuffer(E.ARRAY_BUFFER,T),E.bufferSubData(E.ARRAY_BUFFER,0,M),E.enableVertexAttribArray(Q),E.vertexAttribPointer(Q,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,U),E.bufferSubData(E.ARRAY_BUFFER,0,N),E.enableVertexAttribArray(R),E.vertexAttribPointer(R,
2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,V),E.bufferSubData(E.ARRAY_BUFFER,0,O),E.enableVertexAttribArray(P),E.vertexAttribPointer(P,4,E.UNSIGNED_BYTE,!0,0,0),E.blendFunc(E.ONE,E.ONE_MINUS_SRC_ALPHA),E.useProgram(J),E.uniform1i(S,0),E.drawArrays(E.TRIANGLES,0,L/2)),Z=b)};})()</script></body>
